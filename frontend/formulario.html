
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Formul√°rio</title>
</head>
<body>
<!-- Exemplo de tabela (resumido) -->
<table>
  <tbody id="tabela-agendamentos">
    <!-- Linhas adicionadas via JavaScript normalmente -->
  </tbody>
</table>

<script>
function emitidoCertificado(botao) {
  const linha = botao.closest('tr');
  const colunas = linha.querySelectorAll('td');
  const dados = {
    data: colunas[0].innerText,
    hora: colunas[1].innerText,
    nomeCompleto: colunas[2].innerText,
    cpf: colunas[3].innerText,
    empreendimento: colunas[4].innerText,
    torre: colunas[5].innerText,
    unidade: colunas[6].innerText,
    tipoAtendimento: colunas[7].innerText,
    analista: colunas[8].innerText,
    dataEmissao: new Date().toLocaleDateString('pt-BR') + ' ' + new Date().toLocaleTimeString('pt-BR')
  };

  fetch("/certificados", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(dados)
  }).then(res => {
    if (res.ok) {
      linha.remove(); // remove da lista de agendamentos futuros
    } else {
      alert("Erro ao emitir certificado.");
    }
  });
}
</script>
</body>
</html>
